{% extends 'main/base.html' %}

{% block content %}
<body>
  <img src="{{ post.image.url }}" alt="{{ post.title }}"><br/>
  {{ post.content }}<br/>
  {% if user.is_authenticated %}
    <form action="{% url 'post_like' post.pk %}" method="POST">
        {% csrf_token %}
        {% if user in post.likes.all %}
            <button type="submit" class="fa-solid fa-heart"></button>
        {% else %}
            <button type="submit" class="fa-regular fa-heart"></button>
        {% endif %}
    </form>
  {% endif %}

<p>{{ post.total_likes }}명이 좋아합니다.</p>

  <h2>댓글 목록</h2>
  <ul>
  {% for comment in comments %}
    <li>{{ comment.author.username }}: {{ comment.content }} {{ comment.created_at }}</li>
  {% endfor %}
  </ul>
  {% if user.is_authenticated %}
    <form method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">댓글 작성</button>
    </form>
{% else %}
  <p>로그인 후 댓글을 작성할 수 있습니다.</p>
{% endif %}
</body>
{% endblock %}

